
const fontData = [
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x10,0x10,0x10,0x10,0x10,0x00,0x10,
  0x00,0x28,0x28,0x00,0x00,0x00,0x00,0x00,
  0x00,0x14,0x14,0x7c,0x28,0x7c,0x50,0x50,
  0x00,0x10,0x38,0x50,0x38,0x14,0x38,0x10,
  0x00,0x24,0x54,0x28,0x10,0x28,0x54,0x48,
  0x00,0x30,0x48,0x50,0x20,0x54,0x48,0x34,
  0x00,0x10,0x10,0x00,0x00,0x00,0x00,0x00,
  0x00,0x08,0x10,0x20,0x20,0x20,0x10,0x08,
  0x00,0x20,0x10,0x08,0x08,0x08,0x10,0x20,
  0x00,0x54,0x38,0x38,0x54,0x00,0x00,0x00,
  0x00,0x00,0x10,0x10,0x7c,0x10,0x10,0x00,
  0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x20,
  0x00,0x00,0x00,0x00,0x7c,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x10,
  0x00,0x08,0x08,0x10,0x10,0x10,0x20,0x20,
  0x00,0x38,0x44,0x4c,0x54,0x64,0x44,0x38,
  0x00,0x10,0x30,0x10,0x10,0x10,0x10,0x38,
  0x00,0x38,0x44,0x04,0x18,0x20,0x40,0x7c,
  0x00,0x38,0x44,0x04,0x18,0x04,0x44,0x38,
  0x00,0x08,0x18,0x28,0x48,0x7c,0x08,0x08,
  0x00,0x7c,0x40,0x40,0x38,0x04,0x44,0x38,
  0x00,0x38,0x44,0x40,0x78,0x44,0x44,0x38,
  0x00,0x7c,0x04,0x04,0x08,0x08,0x10,0x10,
  0x00,0x38,0x44,0x44,0x38,0x44,0x44,0x38,
  0x00,0x38,0x44,0x44,0x3c,0x04,0x44,0x38,
  0x00,0x10,0x10,0x00,0x00,0x00,0x10,0x10,
  0x00,0x10,0x10,0x00,0x00,0x10,0x10,0x20,
  0x00,0x08,0x10,0x20,0x40,0x20,0x10,0x08,
  0x00,0x00,0x00,0x7c,0x00,0x7c,0x00,0x00,
  0x00,0x20,0x10,0x08,0x04,0x08,0x10,0x20,
  0x00,0x38,0x44,0x04,0x08,0x10,0x00,0x10,
  0x00,0x38,0x44,0x54,0x6c,0x5c,0x40,0x3c,
  0x00,0x38,0x44,0x44,0x7c,0x44,0x44,0x44,
  0x00,0x78,0x44,0x44,0x78,0x44,0x44,0x78,
  0x00,0x38,0x44,0x40,0x40,0x40,0x44,0x38,
  0x00,0x78,0x44,0x44,0x44,0x44,0x44,0x78,
  0x00,0x7c,0x40,0x40,0x78,0x40,0x40,0x7c,
  0x00,0x7c,0x40,0x40,0x78,0x40,0x40,0x40,
  0x00,0x38,0x44,0x40,0x4c,0x44,0x44,0x38,
  0x00,0x44,0x44,0x44,0x7c,0x44,0x44,0x44,
  0x00,0x38,0x10,0x10,0x10,0x10,0x10,0x38,
  0x00,0x3c,0x08,0x08,0x08,0x08,0x48,0x30,
  0x00,0x44,0x48,0x50,0x60,0x50,0x48,0x44,
  0x00,0x40,0x40,0x40,0x40,0x40,0x40,0x7c,
  0x00,0x44,0x6c,0x54,0x54,0x44,0x44,0x44,
  0x00,0x44,0x64,0x64,0x54,0x4c,0x4c,0x44,
  0x00,0x38,0x44,0x44,0x44,0x44,0x44,0x38,
  0x00,0x78,0x44,0x44,0x78,0x40,0x40,0x40,
  0x00,0x38,0x44,0x44,0x44,0x54,0x4c,0x38,
  0x00,0x78,0x44,0x44,0x78,0x50,0x48,0x44,
  0x00,0x38,0x44,0x40,0x38,0x04,0x44,0x38,
  0x00,0x7c,0x10,0x10,0x10,0x10,0x10,0x10,
  0x00,0x44,0x44,0x44,0x44,0x44,0x44,0x38,
  0x00,0x44,0x44,0x44,0x28,0x28,0x10,0x10,
  0x00,0x44,0x44,0x54,0x54,0x54,0x54,0x28,
  0x00,0x44,0x44,0x28,0x10,0x28,0x44,0x44,
  0x00,0x44,0x44,0x28,0x10,0x10,0x10,0x10,
  0x00,0x7c,0x04,0x08,0x10,0x20,0x40,0x7c,
  0x00,0x38,0x20,0x20,0x20,0x20,0x20,0x38,
  0x00,0x20,0x20,0x10,0x10,0x10,0x08,0x08,
  0x00,0x38,0x08,0x08,0x08,0x08,0x08,0x38,
  0x00,0x10,0x28,0x44,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7c,
  0x00,0x20,0x10,0x08,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x38,0x04,0x3c,0x44,0x3c,
  0x00,0x40,0x40,0x78,0x44,0x44,0x44,0x78,
  0x00,0x00,0x00,0x38,0x40,0x40,0x40,0x38,
  0x00,0x04,0x04,0x3c,0x44,0x44,0x44,0x3c,
  0x00,0x00,0x00,0x38,0x44,0x78,0x40,0x38,
  0x00,0x0c,0x10,0x38,0x10,0x10,0x10,0x10,
  0x00,0x00,0x00,0x3c,0x44,0x3c,0x04,0x38,
  0x00,0x40,0x40,0x78,0x44,0x44,0x44,0x44,
  0x00,0x10,0x00,0x10,0x10,0x10,0x10,0x10,
  0x00,0x10,0x00,0x10,0x10,0x10,0x10,0x60,
  0x00,0x40,0x40,0x48,0x50,0x60,0x50,0x48,
  0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x08,
  0x00,0x00,0x00,0x68,0x54,0x54,0x54,0x54,
  0x00,0x00,0x00,0x78,0x44,0x44,0x44,0x44,
  0x00,0x00,0x00,0x38,0x44,0x44,0x44,0x38,
  0x00,0x00,0x00,0x78,0x44,0x78,0x40,0x40,
  0x00,0x00,0x00,0x3c,0x44,0x3c,0x04,0x04,
  0x00,0x00,0x00,0x58,0x64,0x40,0x40,0x40,
  0x00,0x00,0x00,0x38,0x40,0x38,0x04,0x38,
  0x00,0x00,0x10,0x38,0x10,0x10,0x10,0x08,
  0x00,0x00,0x00,0x44,0x44,0x44,0x44,0x38,
  0x00,0x00,0x00,0x44,0x44,0x44,0x28,0x10,
  0x00,0x00,0x00,0x54,0x54,0x54,0x54,0x28,
  0x00,0x00,0x00,0x44,0x28,0x10,0x28,0x44,
  0x00,0x00,0x00,0x44,0x44,0x3c,0x04,0x38,
  0x00,0x00,0x00,0x7c,0x08,0x10,0x20,0x7c,
  0x00,0x18,0x20,0x20,0x40,0x20,0x20,0x18,
  0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,
  0x00,0x30,0x08,0x08,0x04,0x08,0x08,0x30,
  0x00,0x00,0x00,0x00,0x34,0x48,0x00,0x00,
  0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
];

const waveVisData = [
  0xe000, 0xa000, 0xa000, 0xa000, 0xa000, 0xa000, 0xa000, 0xbfff,
  0xf800, 0x8800, 0x8800, 0x8800, 0x8800, 0x8800, 0x8800, 0x8fff,
  0xff80, 0x8080, 0x8080, 0x8080, 0x8080, 0x8080, 0x8080, 0x80ff,
  0x8fff, 0x8800, 0x8800, 0x8800, 0x8800, 0x8800, 0x8800, 0xf800,
  0x0180, 0x0240, 0x0420, 0x0810, 0x1008, 0x2004, 0x4002, 0x8001,
  0x5cfd, 0x54a5, 0x54a5, 0x54a5, 0x54a5, 0x54a5, 0x54a5, 0xf7a7,
  0xaeae, 0xaaaa, 0xaaaa, 0xaaaa, 0xaaaa, 0xaaaa, 0xaaaa, 0xfbfb,
  0x3800, 0x4400, 0x820c, 0x8213, 0x0120, 0x0120, 0x00c0, 0x0000
];

function fillCharcater(ctx, c, x, y) {
  for(let py = 0; py < 8; py++) {
    let code = c.charCodeAt(0);
    if(code < 0x20 || code >= 0x7f) code = 0x7f;
    code -= 0x20;
    let line = fontData[8 * code + py];
    for(let px = 0; px < 8; px++) {
      if(line & 0x80) ctx.fillRect(x + px, y + py, 1, 1);
      line <<= 1;
    }
  }
}

function fillWaveVis(ctx, t, x, y) {
  for(let py = 0; py < 8; py++) {
    let line = waveVisData[8 * t + py];
    for(let px = 0; px < 16; px++) {
      if(line & 0x8000) ctx.fillRect(x + px, y + py, 1, 1);
      line <<= 1;
    }
  }
}

function fillString(ctx, str, x, y) {
  for(let i = 0; i < str.length; i++) {
    let c = str.charAt(i);
    fillCharcater(ctx, c, x, y);
    x += 8;
  }
}
